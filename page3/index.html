<!DOCTYPE html>
<html>
  <head>
  <script>
if (window.location.host.indexOf('github.io') > -1 && window.location.protocol == "http:") {
      window.location.protocol = "https";
}
</script>


  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-58866358-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-58866358-1);
</script>


  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>Yeghishe Piruzyan&#39;s blog</title>
  <meta name="description" content="I'm a software engineer based in Los Angeles. I'll be blogging about interesting technologies and challenges I face that others may find helpful.
">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://yeghishe.github.io/page3/">
  <link rel="alternate" type="application/rss+xml" title="Yeghishe Piruzyan's blog" href="http://yeghishe.github.io/feed.xml">
</head>

  <body>
    <div class="container-fluid">
      <div class="row">
        
      </div>

      <div class="row">
        <div class="sidebar col-sm-3 hidden-xs">
  <div class="about">
  <a class="divider" href="/">Yeghishe Piruzyan</a>
  <p>
     I'm a software engineer based in Los Angeles. Blogging about interesting technologies and challenges.
  </p>
  <p class="scala">
    scala> favoriteTopic()
    <br />
    res0: String = scala
  </p>

  <ul class="divider">
    <li>
      <a href="https://github.com/yeghishe" target="_blank">
        <i class="fa fa-github" aria-hidden="true"></i>
      </a>
    </li>

    <li>
      <a href="https://www.linkedin.com/in/ypiruzyan" target="_blank">
        <i class="fa fa-linkedin-square" aria-hidden="true"></i>
      </a>
    </li>

    <li>
      <a href="https://twitter.com/ypiruzyan" target="_blank">
        <i class="fa fa-twitter-square" aria-hidden="true"></i>
      </a>
    </li>

    <li>
      <a href="mailto:ypiruzyan@gmail.com">
        <i class="fa fa fa-envelope-square" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

  <ul class="tag-list divider">
  
    
    
    
    <li>
      <a class="page-link" href="/tags/misc">misc</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/tools">tools</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/sbt">sbt</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/scala">scala</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/jenkins">jenkins</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/build">build</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/akka">akka</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/activator">activator</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/docker">docker</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/scalaz">scalaz</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/nodejs">nodejs</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/devops">devops</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/coffeescript">coffeescript</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/gulp">gulp</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/ionic">ionic</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/coffeescript">coffeescript</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/vpn">vpn</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/opensource">opensource</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/aws">aws</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/activat">activat</a>
    </li>
  
</ul>

  <nav>
</nav>


  <a class="rss" href="/feed.xml">
    subscribe via RSS <i class="fa fa-rss-square" aria-hidden="true"></i>
  </a>
</div>


        <main class="col-sm-offset-3 col-sm-9">
          <ul class="post-list">
  
    <li>
      <h2 class="post-title">
        <a href="/2015/08/13/how-to-run-node-apps-in-docker.html">How To Run Node Apps In Docker</a>
      </h2>

      <h3 class="post-details">
        <time>Aug 13, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/nodejs">nodejs</a>
          </li>
        
          <li>
            
            <a href="/tags/docker">docker</a>
          </li>
        
          <li>
            
            <a href="/tags/devops">devops</a>
          </li>
        
          <li>
            
            <a href="/tags/coffeescript">coffeescript</a>
          </li>
        
        </ul>
      </h3>

      <p>I like to use docker to run my server side apps and my node apps aren’t
exception. Decided to show the docker file I use for my node apps and explain
what I’m doing there. I copy the entire source, having the files I want to
exclude in docker ignore file. The most important thing to note is I don’t copy
<em>node_modules</em> directories, I do fresh install in docker. Main reason is that
docker container is kinda different operating system and potentially a different
distro (Debian in this instance, because I love it!) than dev or CI box.
So why not build the code where it’s gonna run and if there are issues I’ll
know about it sooner. Also note that I run <em>npm install</em> with <em>production</em>
switch so it doesn’t install dev dependencies, which I don’t really need to run
my app.</p>



      <a class="btn btn-lg btn-default" href="/2015/08/13/how-to-run-node-apps-in-docker.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/07/19/scalaz-apply.html">Scalaz Apply</a>
      </h2>

      <h3 class="post-details">
        <time>Jul 19, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/scalaz">scalaz</a>
          </li>
        
        </ul>
      </h3>

      <p><em>Apply</em> is <em>Functor</em> that also has apply method.
Scalaz defines <em>Apply[F[_]]</em> trait with <em>ap</em> abstract method.</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span></span><span class="k">def</span> <span class="n">ap</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="o">⇒</span> <span class="n">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="o">⇒</span> <span class="n">F</span><span class="o">[</span><span class="kt">A</span> <span class="k">⇒</span> <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span></code></pre></figure>

<p>Having a higher kind A and hight kind of A to B mapping we can get higher
kind B.  And since <em>Apply</em> is also a functor we also have</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span></span><span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">⇒</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span></code></pre></figure>



      <a class="btn btn-lg btn-default" href="/2015/07/19/scalaz-apply.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/07/15/scalaz-functor.html">Scalaz Functor</a>
      </h2>

      <h3 class="post-details">
        <time>Jul 15, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/scalaz">scalaz</a>
          </li>
        
        </ul>
      </h3>

      <p><em>Functor</em> is a mapping from type F[A] hight kind to F[B]. Scalaz defines
<em>Functor[F[_]]</em> trait with <em>map</em> abstract method.</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span></span><span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">⇒</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span></code></pre></figure>

<p>Having a higher kind A and A to B mapping we can get higher
kind B.</p>



      <a class="btn btn-lg btn-default" href="/2015/07/15/scalaz-functor.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/07/13/scalaz-methods-scalaz-adds-to-standard-classes-integer-string-boolean.html">Methods Scalaz Adds To Standard Classes - Integer, String and Boolean</a>
      </h2>

      <h3 class="post-details">
        <time>Jul 13, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/scalaz">scalaz</a>
          </li>
        
        </ul>
      </h3>

      <p>In my previous article about <em>Semigroup</em>, <em>Monoid</em>, <em>Equal</em>, <em>Order</em>, <em>Enum</em>
and <em>Show</em>.  I covered what those are, what method they have and what derived
and syntax sugar methods scalaz bring for them. Also I showed that there are
implicit implementations of those for scala standard classes that once are
brought into the scope you’ll have access to those. In this article I’m gonna
show those methods in action for <em>integer</em>, <em>string</em> and <em>boolean</em>.</p>



      <a class="btn btn-lg btn-default" href="/2015/07/13/scalaz-methods-scalaz-adds-to-standard-classes-integer-string-boolean.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/07/06/scalaz.html">Scalaz</a>
      </h2>

      <h3 class="post-details">
        <time>Jul 6, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/scalaz">scalaz</a>
          </li>
        
        </ul>
      </h3>

      <p>Scala is an object oriented language with functional aspects. Some people
like the object oriented aspect, some are attracted by the functional part.
Add to that the fact that it’s sitting on top of JVM and of course it’s
influenced by Java a lot, we still have nulls, we still have exceptions,
IO and state mutation, etc. And since Scala isn’t purely functional it still
allows us to write imperative code, call a Java library that will throw an
exception, etc. I personally think that functional code is easier to read and 
understand, unit test and maintain(not event talking about state and multiple
threads). So when it comes to writing purely functional code (or as close to it
as possible) Scala sure misses certain things and scalaz has a lot built to
help. I decided to write series or posts to explain scalaz. I’ll start with the
basics, most common abstractions then explain more real words cases.
I’ll put the links to all posts here so it’s easy to navigate.</p>



      <a class="btn btn-lg btn-default" href="/2015/07/06/scalaz.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/07/06/scalaz-semigroup-monoid-equal-order-enum-show-and-standard-scala-classes.html">Scalaz Semigroup, Monoid, Equal, Order, Enum, Show and Standard Scala Classes</a>
      </h2>

      <h3 class="post-details">
        <time>Jul 6, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/scalaz">scalaz</a>
          </li>
        
        </ul>
      </h3>

      <p>Scalaz has so many abstractions and higher kinds that model lot of
algebraic structures, monads, hight level types to generalize common structures
and offers lot of tools that work with those abstractions.
In this article I wanted to cover the very basics. Ones we see every day
in standard scala library. What the anomalies of basic types are in standard
scala library, what are the comment things between them that can be made
generic, how to use scalaz with standard classes defined in scala library.</p>



      <a class="btn btn-lg btn-default" href="/2015/07/06/scalaz-semigroup-monoid-equal-order-enum-show-and-standard-scala-classes.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/06/24/running-akka-applications.html">Running Akka Applications</a>
      </h2>

      <h3 class="post-details">
        <time>Jun 24, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/sbt">sbt</a>
          </li>
        
          <li>
            
            <a href="/tags/akka">akka</a>
          </li>
        
          <li>
            
            <a href="/tags/docker">docker</a>
          </li>
        
          <li>
            
            <a href="/tags/sbt">sbt</a>
          </li>
        
          <li>
            
            <a href="/tags/activator">activator</a>
          </li>
        
        </ul>
      </h3>

      <p>With <em>akka</em> becoming more and more popular, <em>akka kernel</em> being deprecated,
<em>docker</em> rocking the word, <em>Typesafe</em> releasing <em>ConductR</em> and more folks
getting to scala, I wanted to write a post about how to run akka applications.
Akka applications aren’t servlet applications java developers are used to,
normally those are main class applications in a jar file and have other jars as
dependencies. So it’s no-brainer that we can just use java command and
no container like tomcat or jetty is need. I will cover how to run in
development while iterating on a task. How to run it in development and tunnel
the port and let others point to your code before you even go to production
or pre production environment and how to run it inside a docker container in
production and pre production environments. Unforunatly I didn’t get hold of
<em>ConductR</em> to try it myself, so I won’t be writing about it in
this post. Btw, most of this should be to relevant other scala/java main class
applications not only <em>akka</em> and <em>akka http</em> applications.</p>



      <a class="btn btn-lg btn-default" href="/2015/06/24/running-akka-applications.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/06/16/activator-and-my-activator-templates.html">Activator And My Activator Templates</a>
      </h2>

      <h3 class="post-details">
        <time>Jun 16, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/activator">activator</a>
          </li>
        
        </ul>
      </h3>

      <p>When activator just came out I wasn’t really excited about it. I’m more of a
command line guy and using a web UI to help me build, test, run my code isn’t
very useful to me. Activate also allows you to browse the code from web IDE. I
usually use Vim, IntelliJ or GitHub for it, but I get the idea, for someone who
doesn’t have his or her environment setup and maybe got a project that’s not
even in github yet, web IDE can be helpful. I have to give more credit to
activator though, because of couple really cool things. Recently my colleague
who’s not a scala developer (and of course he doesn’t have his scala
environment setup with latest sbt and all that) needed to run one of the
projects we have in his local computer and asked me how to do it.
And of course first thing that came to my mind was get the latest sbt and do sbt
run. Then I remembered that I started that project from one of the activator
templates I created, so it must have activator there. So he ran <code>./activator</code>
and magic! It went and downloaded needed sbt version and loaded sbt environment
for him. And the reason I started my own activator templates at first place is
because it solves another big problem for me.</p>



      <a class="btn btn-lg btn-default" href="/2015/06/16/activator-and-my-activator-templates.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/05/31/scalatest-testing-styles.html">Testing styles in ScalaTest</a>
      </h2>

      <h3 class="post-details">
        <time>May 31, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/akka">akka</a>
          </li>
        
        </ul>
      </h3>

      <p>Over time different libraries brought different testing styles, jUnit, xUnit,
Rspec, ert. Nowadays since many people have different backgrounds and
different taste when it comes to writing unit tests, most test libraries
offer many testing styles and <em>ScalaTest</em> isn’t an exception. To me there are
three groups of testing styles. One would the traditional jUnit, xUnit
style where you define a test class and unit tests are methods in that test
class, you also define <em>setUp</em> and <em>tearDown</em> methods that must be called
before and after each unit test. Of course there are also <em>setUp</em> and <em>tearDown</em>
versions that run once per test suit but I don’t want to talk more about it here.
I must admit that this isn’t my favorite style and here is why. I like to unit
test aggressively without skipping any business cases instead of just
relying on code coverage and saying my other test already is hitting those
lines. If I have a class with many methods I write many unit tests for each
method, an example would be when a method takes a parameter and based on
different values for those parameters it does different things, of course we
want to have multiple unit tests for that method to cover all business cases
for that method. So this alone groups unit tests in a test class by functions,
another thing is that most likely unit tests for function A will share some
setup logic. This testing style forces as to put setup code for all unit tests for function A in
setup method, and when we have like 10 such functions, setup method will have
the setup code for all those function which will make it long, hard to read,
also it will be extremely hard to tell which setup code is for which unit test.
Another option is to define setup code in each unit test with isn’t really a
good idea since one we’ll have duplicated code and unit tests now will be
longer than they need to be and hard to understand. I see some people like to
solve this problem by moving this common code into private methods. Although this
solves code duplication problem, also makes unit tests shorter but it introduced
another big problem. When I read a unit test I want to know what the method is
doing in 2 seconds, unit tests are documentations right. Now you come across
this private method call, you have to find it’s implementation, read the ugly
code there and jump back to continue reading what that unit test is trying to
test. It’s a nightmare to me, I call that unit test anything but readable and
I sure don’t want to be one maintain that code.
Before I moved to next type of unit tests, I must mention what styles ScalaTest
is offering here. <em>FunSuite</em> and <em>FlatSpec</em>, you can read more about those in
ScalaTest documentation. Both are flat as mentioned, one is more like jUnit,
other is more like xUnit.</p>



      <a class="btn btn-lg btn-default" href="/2015/05/31/scalatest-testing-styles.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/05/22/simple-caching-for-akka-actors.html">Simple Caching For Akka Actors</a>
      </h2>

      <h3 class="post-details">
        <time>May 22, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/scala">scala</a>
          </li>
        
          <li>
            
            <a href="/tags/akka">akka</a>
          </li>
        
        </ul>
      </h3>

      <p>Recently I needed to cache some lightweight data into actor’s local memory to
not make unnecessary calls to third party service over the internet. I think what I
came up with is a pretty simple implementation (hence I named the article
simple caching in akka). But the idea can be expended with small changes
if any to use it to cache actor messages. Let’s imagine the word of actors where
we have one actor per user and we send messages to user actors to get some info
back. Now when we say each user (actor) is responsible to cache it’s own data
it means each actor will use even more memory so at some point we’ll need to
scale out because we’ll run out of memory (not that we didn’t have that
problem without cache at first place). But it’s a good thing that we know we
need to scale out from the beginning because I didn’t mention about high
availability yet, so we at least need two boxes.</p>



      <a class="btn btn-lg btn-default" href="/2015/05/22/simple-caching-for-akka-actors.html">read more</a>
    </li>
  
</ul>

<ul class="pager">
  
    <li><a href="/page2">Previous</a></li>
  
  <li>3 of 4</li>
  
    <li><a href="/page4">Next</a></li>
  
</ul>


        </main>
      </div>

      <div class="row">
        <footer>
  <!-- Start of Async Drift Code -->
<script>
!function() {
  var t;
  if (t = window.driftt = window.drift = window.driftt || [], !t.init) return t.invoked ? void (window.console && console.error && console.error("Drift snippet included twice.")) : (t.invoked = !0, 
  t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
  t.factory = function(e) {
    return function() {
      var n;
      return n = Array.prototype.slice.call(arguments), n.unshift(e), t.push(n), t;
    };
  }, t.methods.forEach(function(e) {
    t[e] = t.factory(e);
  }), t.load = function(t) {
    var e, n, o, i;
    e = 3e5, i = Math.ceil(new Date() / e) * e, o = document.createElement("script"), 
    o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + i + "/" + t + ".js", 
    n = document.getElementsByTagName("script")[0], n.parentNode.insertBefore(o, n);
  });
}();
drift.SNIPPET_VERSION = '0.3.1';
drift.load('2kiff4ruxwsv');
</script>
<!-- End of Async Drift Code -->

  <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false">
</script>
<script type="text/javascript">
function showSubscribePopup() {
  require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us14.list-manage.com","uuid":"af42fcfb68a954d33541475b5","lid":"a273a67cf2"}) });
  document.cookie = "MCEvilPopupClosed=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
}
</script>

  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-551b16eb4d31da19" async="async"></script>
</footer>



      </div>
    </div>
  </body>
</html>
