<!DOCTYPE html>
<html>
  <head>
  <script>
if (window.location.host.indexOf('github.io') > -1 && window.location.protocol == "http:") {
      window.location.protocol = "https";
}
</script>


  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-58866358-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-58866358-1);
</script>


  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>Yeghishe Piruzyan&#39;s blog</title>
  <meta name="description" content="I'm a software engineer based in Los Angeles. I'll be blogging about interesting technologies and challenges I face that others may find helpful.
">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://yeghishe.github.io/tags/nodejs/">
  <link rel="alternate" type="application/rss+xml" title="Yeghishe Piruzyan's blog" href="http://yeghishe.github.io/feed.xml">
</head>

  <body>
    <div class="container-fluid">
      <div class="row">
        
      </div>

      <div class="row">
        <div class="sidebar col-sm-3 hidden-xs">
  <div class="about">
  <a class="divider" href="/">Yeghishe Piruzyan</a>
  <p>
     I'm a software engineer based in Los Angeles. Blogging about interesting technologies and challenges.
  </p>
  <p class="scala">
    scala> favoriteTopic()
    <br />
    res0: String = scala
  </p>

  <ul class="divider">
    <li>
      <a href="https://github.com/yeghishe" target="_blank">
        <i class="fa fa-github" aria-hidden="true"></i>
      </a>
    </li>

    <li>
      <a href="https://www.linkedin.com/in/ypiruzyan" target="_blank">
        <i class="fa fa-linkedin-square" aria-hidden="true"></i>
      </a>
    </li>

    <li>
      <a href="https://twitter.com/ypiruzyan" target="_blank">
        <i class="fa fa-twitter-square" aria-hidden="true"></i>
      </a>
    </li>

    <li>
      <a href="mailto:ypiruzyan@gmail.com">
        <i class="fa fa fa-envelope-square" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

  <ul class="tag-list divider">
  
    
    
    
    <li>
      <a class="page-link" href="/tags/misc">misc</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/tools">tools</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/sbt">sbt</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/scala">scala</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/jenkins">jenkins</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/build">build</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/akka">akka</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/activator">activator</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/docker">docker</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/scalaz">scalaz</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/nodejs">nodejs</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/devops">devops</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/coffeescript">coffeescript</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/gulp">gulp</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/ionic">ionic</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/coffeescript">coffeescript</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/vpn">vpn</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/opensource">opensource</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/aws">aws</a>
    </li>
  
    
    
    
    <li>
      <a class="page-link" href="/tags/activat">activat</a>
    </li>
  
</ul>

  <nav>
</nav>


  <a class="rss" href="/feed.xml">
    subscribe via RSS <i class="fa fa-rss-square" aria-hidden="true"></i>
  </a>
</div>


        <main class="col-sm-offset-3 col-sm-9">
          <ul class="post-list">
  
    <li>
      <h2 class="post-title">
        <a href="/2015/08/13/how-to-run-node-apps-in-docker.html">How To Run Node Apps In Docker</a>
      </h2>

      <h3 class="post-details">
        <time>Aug 13, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/nodejs">nodejs</a>
          </li>
        
          <li>
            
            <a href="/tags/docker">docker</a>
          </li>
        
          <li>
            
            <a href="/tags/devops">devops</a>
          </li>
        
          <li>
            
            <a href="/tags/coffeescript">coffeescript</a>
          </li>
        
        </ul>
      </h3>

      <p>I like to use docker to run my server side apps and my node apps aren’t
exception. Decided to show the docker file I use for my node apps and explain
what I’m doing there. I copy the entire source, having the files I want to
exclude in docker ignore file. The most important thing to note is I don’t copy
<em>node_modules</em> directories, I do fresh install in docker. Main reason is that
docker container is kinda different operating system and potentially a different
distro (Debian in this instance, because I love it!) than dev or CI box.
So why not build the code where it’s gonna run and if there are issues I’ll
know about it sooner. Also note that I run <em>npm install</em> with <em>production</em>
switch so it doesn’t install dev dependencies, which I don’t really need to run
my app.</p>



      <a class="btn btn-lg btn-default" href="/2015/08/13/how-to-run-node-apps-in-docker.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/08/13/my-gulp-files-ionic-app.html">My Gulp Files&#58; Ionic App Projects</a>
      </h2>

      <h3 class="post-details">
        <time>Aug 13, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/gulp">gulp</a>
          </li>
        
          <li>
            
            <a href="/tags/nodejs">nodejs</a>
          </li>
        
          <li>
            
            <a href="/tags/coffeescript">coffeescript</a>
          </li>
        
          <li>
            
            <a href="/tags/build">build</a>
          </li>
        
          <li>
            
            <a href="/tags/ionic">ionic</a>
          </li>
        
        </ul>
      </h3>

      <p>For Ionic projects also I use CoffeeScript, Sass, Jade although ionic generates
the project in JavaScript and Html. Here we have front-end components,
compilation, browser testing, live reload, and all that goodness. Here we do
need to compile CoffeScript to JavaScript, Sass to Css and Jade to Html.
Another thing that needs to be solved since browser will run JavaScript, Css
and html instead of CoffeScript, Jade, Sass so debugging will be really
challenging. To solved that problem I generate source map files. I also use
CoffeScript for my gulpfile since it makes it much more clean and compact.
Some people who do that like to also create <em>gulpfile.js</em> file with</p>



      <a class="btn btn-lg btn-default" href="/2015/08/13/my-gulp-files-ionic-app.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/08/13/my-gulp-files-library.html">My Gulp Files&#58; Library Projects</a>
      </h2>

      <h3 class="post-details">
        <time>Aug 13, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/gulp">gulp</a>
          </li>
        
          <li>
            
            <a href="/tags/nodejs">nodejs</a>
          </li>
        
          <li>
            
            <a href="/tags/coffeescript">coffeescript</a>
          </li>
        
          <li>
            
            <a href="/tags/build">build</a>
          </li>
        
        </ul>
      </h3>

      <p>For this type of projects I use CoffeScript, Chai and Mocka for unit testing,
Istanbul for code coverage, Sinon and Proxyquire for mocking, Jenkins for
continuous integration. This type of projects are easy to build because those
don’t have front-end components, compilation/optimization, browser testing,
live reload etc. Here we do need to compile CoffeScript to JavaScript since
we’re gonna publish the package with JavaScript code and not CoffeScript. What I
do is keep my coffee code in <em>src</em> directory instead of <em>lib</em>. At compile time I
generate JavaScript code into <em>lib</em> directory, add <em>src</em> directory to <em>.npmignore</em> and
<em>lib</em> directory to <em>.gitignore</em>. That way my CoffeeScript ends up in git repo but
not generated JavaScript and my JavaScript ends up in published package and not
JavaScript, pretty smart right :). I also use CoffeScript for my
gulpfile since it makes it much more clean and compact. Some people who do
that like to also create <em>gulpfile.js</em> file with</p>



      <a class="btn btn-lg btn-default" href="/2015/08/13/my-gulp-files-library.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/08/13/my-gulp-files-rest-api.html">My Gulp Files&#58; Rest Api Projects</a>
      </h2>

      <h3 class="post-details">
        <time>Aug 13, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/gulp">gulp</a>
          </li>
        
          <li>
            
            <a href="/tags/nodejs">nodejs</a>
          </li>
        
          <li>
            
            <a href="/tags/coffeescript">coffeescript</a>
          </li>
        
          <li>
            
            <a href="/tags/build">build</a>
          </li>
        
          <li>
            
            <a href="/tags/docker">docker</a>
          </li>
        
        </ul>
      </h3>

      <p>For this type of projects I use CoffeScript, Chai and Mocka for unit testing,
Istanbul for code coverage, Sinon and Proxyquire for mocking, Jenkins for
continuous integration. This type of projects are easy to build because those
don’t have front-end components, compilation/optimization, browser testing,
live reload etc. And for server side code we don’t need to compile CoffeeScript to
JavaScript since it’s running on server and we can use <em>coffee</em> executable to
run the code instead of <em>node</em> executable. I also use CoffeScript for my
gulpfile since it makes it much more clean and compact. Some people who do
that like to also create <em>gulpfile.js</em> file with</p>



      <a class="btn btn-lg btn-default" href="/2015/08/13/my-gulp-files-rest-api.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/08/13/my-gulp-files.html">My Gulp Files</a>
      </h2>

      <h3 class="post-details">
        <time>Aug 13, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/gulp">gulp</a>
          </li>
        
          <li>
            
            <a href="/tags/nodejs">nodejs</a>
          </li>
        
          <li>
            
            <a href="/tags/coffeescript">coffeescript</a>
          </li>
        
          <li>
            
            <a href="/tags/build">build</a>
          </li>
        
        </ul>
      </h3>

      <p>Recently I decided to upgrade to Gulp 4 even though it’s not released yet.
And since there are some breaking changes I had to go over my gulp files.
I usually do three type of projects in node/js, rest apis, library projects
(npm packages), ionic and angular apps. I decided to write blog posts and share
my gulp files in case other will find it useful. I do like to use the most loved
and hated language in node world, CoffeeScript. I sure give it some love here,
not because I find JavaScript hard or don’t know how to properly scope my
variables or make objects, but because I find code written in CoffeScript much
more readable and maintainable (yep, all that brackets and parentheses.)
Other libraries I religiously use are Chai and Mocka for unit testing, Istanbul
for code coverage, Sinon and Proxyquire for mocking, Jade for templates,
Sass for stylesheets and of course Jenkins for continuous integration. So this
combination on it’s own makes my gulp files pretty unique. Listing links to
individual posts where I have my gulp file and I’m explaining which task is
doing what.</p>



      <a class="btn btn-lg btn-default" href="/2015/08/13/my-gulp-files.html">read more</a>
    </li>
  
    <li>
      <h2 class="post-title">
        <a href="/2015/08/14/continuous-integration-for-node-projects.html">Continuous Integration For Node Projects</a>
      </h2>

      <h3 class="post-details">
        <time>Aug 14, 2015</time> •

        <ul class="tag-list">
        
          <li>
            
            <a href="/tags/nodejs">nodejs</a>
          </li>
        
          <li>
            
            <a href="/tags/jenkins">jenkins</a>
          </li>
        
          <li>
            
            <a href="/tags/build">build</a>
          </li>
        
        </ul>
      </h3>

      <p>A while ago I wrote a post about continuous integration with Jenkins for scala
projects and I thought I would do one for node developers also. Make sure to
check out my other posts about how to write your gulp files since we’ll heavily
really on those gulp tasks. I will put the links at the end of this post.
So what is continuous integration, at the very high level it’s about hey is
the code in a good state, no matter by how many people code is being updated,
how often code is being changed or of how many building blocks project consists of.
When you start working on a feature you’re gonna branch of mainline and start
introducing changes. At some point when you find things are broken now you have
to spend time to see if it’s because of your changes or project was already in
a bad state. And when you find out that it was already in a bad state you
would want to start tracing. A who introduced the breaking changes and B when.
So to avoid the head each and frustration what you really want to know is
if project is in a good state before you even start working on it.
One option would be to compile the code before you start changing it.
But if code compiles is it enough? Oh you you also wanna know if unit tests are
passing. But is this enough? Check for compiler warnings? Style violations?
Code coverage? What if you run code coverage and it shows that it’s 85%,
does it mean everything is good, what if code coverage was 95% last week and
code without proper code coverage got committed and code coverage dropped
(do you remember what code coverage was last week, can you even find
out without going back in commits and running coverage reports on those commits.) are you sure
you want to introduce your changes on top of those changes?
Let’s make it even more complex, what if the project consists of many other
projects and the project you’re working on brings all those dependencies
tougher. Maybe you should checkout all those dependency projects
and see if those are in a good state also.
Let’s make it even more complex, what if the project isn’t just set of
projects that get bundled into one big project.
What if the whole code base consists of many micro services that talk to each other
via some form of PRC. OK maybe you can manage to do all this to know if code is
in a good state before you introduce your changes what about the point B I
brought earlier about when code broke, because longer it was in that states
longer it’s gonna take to trace the breaking change and longer to fix.
Can you go and check every single project every time someone makes a commit
to make sure that commit is good? Well actually you can, you just need a
build server. So all those points I was bringing was about whatever your
integration is it should be continuous and it’s continuous if it runs after
somebody changes something (or maybe before is a better option?☺ I’ll get
to this later.)</p>



      <a class="btn btn-lg btn-default" href="/2015/08/14/continuous-integration-for-node-projects.html">read more</a>
    </li>
  
</ul>


        </main>
      </div>

      <div class="row">
        <footer>
  <!-- Start of Async Drift Code -->
<script>
!function() {
  var t;
  if (t = window.driftt = window.drift = window.driftt || [], !t.init) return t.invoked ? void (window.console && console.error && console.error("Drift snippet included twice.")) : (t.invoked = !0, 
  t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
  t.factory = function(e) {
    return function() {
      var n;
      return n = Array.prototype.slice.call(arguments), n.unshift(e), t.push(n), t;
    };
  }, t.methods.forEach(function(e) {
    t[e] = t.factory(e);
  }), t.load = function(t) {
    var e, n, o, i;
    e = 3e5, i = Math.ceil(new Date() / e) * e, o = document.createElement("script"), 
    o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + i + "/" + t + ".js", 
    n = document.getElementsByTagName("script")[0], n.parentNode.insertBefore(o, n);
  });
}();
drift.SNIPPET_VERSION = '0.3.1';
drift.load('2kiff4ruxwsv');
</script>
<!-- End of Async Drift Code -->

  <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false">
</script>
<script type="text/javascript">
function showSubscribePopup() {
  require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us14.list-manage.com","uuid":"af42fcfb68a954d33541475b5","lid":"a273a67cf2"}) });
  document.cookie = "MCEvilPopupClosed=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
}
</script>

  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-551b16eb4d31da19" async="async"></script>
</footer>



      </div>
    </div>
  </body>
</html>
